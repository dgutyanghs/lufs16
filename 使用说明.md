# 视频音频响度调节器 - 使用说明

## 🚀 快速开始

### 方法一：使用本地服务器（推荐）

1. **确保已安装 Node.js**

   - 访问 https://nodejs.org/ 下载并安装
   - 或使用包管理器：`winget install OpenJS.NodeJS`

2. **启动服务器**

   - Windows: 双击 `start-server.bat`
   - Mac/Linux: 运行 `./start-server.sh`
   - 或手动运行: `node server-headers.js`

3. **访问应用**
   - 打开浏览器访问 http://localhost:8080
   - 现在可以享受完整的性能和功能

### 方法二：直接打开 HTML 文件

1. 直接在浏览器中打开 `index.html`
2. 功能完全正常，但处理速度会较慢
3. 会看到性能提示，可以忽略继续使用

## 📱 浏览器要求

### 推荐浏览器

- ✅ Chrome 88+ （最佳性能）
- ✅ Firefox 85+
- ✅ Safari 14+
- ✅ Edge 88+

### 必需功能

- WebAssembly 支持
- File API 支持
- 现代 JavaScript 支持

## 🎵 使用步骤

1. **上传视频**

   - 拖拽视频文件到上传区域
   - 或点击"选择视频文件"按钮
   - 支持格式：MP4, AVI, MOV, MKV, WebM 等

2. **自动处理**

   - 系统自动分析音频响度
   - 应用 loudnorm 滤镜标准化到-16 LUFS
   - 显示处理进度

3. **查看结果**
   - 查看原始响度和调节后的参数
   - 预览处理后的视频
   - 下载标准化后的视频文件

## 📊 技术参数

### 响度标准

- **目标响度**: -16 LUFS (广播标准)
- **峰值限制**: -1.5 dBTP
- **响度范围**: 11 LU

### 输出规格

- **容器格式**: MP4
- **视频编码**: 保持原始 (copy 模式)
- **音频编码**: AAC 192kbps
- **文件大小**: 通常与原文件相近

## ⚠️ 注意事项

### 文件限制

- 最大文件大小：1GB
- 处理时间取决于文件大小和复杂度
- 建议在处理大文件时保持浏览器标签页活跃

### 性能优化

- 使用本地服务器获得最佳性能
- 确保有足够的系统内存
- 关闭不必要的浏览器标签页

### 常见问题

**Q: 为什么显示 SharedArrayBuffer 不可用？**
A: 这是浏览器安全限制。使用本地服务器或 HTTPS 可以解决。不影响功能，只是速度较慢。

**Q: 处理很慢怎么办？**
A: 1) 使用本地服务器 2) 确保足够内存 3) 尝试较小的文件

**Q: 支持哪些视频格式？**
A: 支持所有 FFmpeg 兼容的格式，包括 MP4、AVI、MOV、MKV、WebM 等。

**Q: 音频质量会下降吗？**
A: 使用专业的 loudnorm 算法，音质损失极小。输出为 AAC 192kbps 高质量音频。

## 🔧 高级用法

### 批量处理

```javascript
// 在浏览器控制台中使用
const processor = new FFmpegAudioProcessor();
const batchProcessor = new BatchProcessor(processor);
// 然后选择多个文件进行批量处理
```

### 自定义参数

```javascript
// 修改目标响度
const processor = new FFmpegAudioProcessor();
processor.targetLUFS = -23; // 流媒体标准
```

## 📞 技术支持

如遇到问题：

1. 检查浏览器控制台的错误信息
2. 确认文件格式是否支持
3. 尝试使用本地服务器
4. 检查系统内存是否充足

## 📄 许可证

MIT License - 可自由使用、修改和分发。
